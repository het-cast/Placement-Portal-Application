@using PlacementPortal.BLL.Constants
@using PlacementPortal.DAL.ViewModels
@model PlacementPortal.DAL.ViewModels.PaginationDTO<ResumeUploadDTO>

@if (Model.Items == null || Model.Items.Count <= 0)
{
  <div class="d-flex justify-content-center align-items-center fs-3 fw-bold"
    style="background-color: #eae6f9; color: #5f4dbf;">
    <p>@GeneralConst.NoApplicationsFound</p>
  </div>
}
else
{

  <div class="table-responsive shadow-sm bg-white rounded">
    <table class="table table-striped table-hover align-middle mb-0">
      <thead class="table-primary">
        <tr>
          <th>
            <div class="d-flex gap-2 justify-content-center flex-wrap">
              <span>Student Name</span>
              <div class="sorting-filters">
                <i class="fa-solid fa-arrow-down sort-order-resume" data-sortcolumn="@FilterConst.StudentIdSort"
                  data-sortorder="@FilterConst.Descending"></i>
                <i class="fa-solid fa-arrow-up sort-order-resume" data-sortcolumn="@FilterConst.StudentIdSort"
                  data-sortorder="@FilterConst.Ascending"></i>
              </div>
            </div>
          </th>
          <th>Email</th>
          <th>
            <div class="d-flex gap-2 justify-content-center flex-wrap">
              <span>Department</span>
              <div class="sorting-filters">
                <i class="fa-solid fa-arrow-down sort-order-resume" data-sortcolumn="@FilterConst.DeptNameSort"
                  data-sortorder="@FilterConst.Descending"></i>
                <i class="fa-solid fa-arrow-up sort-order-resume" data-sortcolumn="@FilterConst.DeptNameSort"
                  data-sortorder="@FilterConst.Ascending"></i>
              </div>
            </div>
          </th>
          <th>
            <div class="d-flex gap-2 justify-content-center flex-wrap">
              <span>Date</span>
              <div class="sorting-filters">
                <i class="fa-solid fa-arrow-down sort-order-resume" data-sortcolumn="@FilterConst.CreatedAtSort"
                  data-sortorder="@FilterConst.Descending"></i>
                <i class="fa-solid fa-arrow-up sort-order-resume" data-sortcolumn="@FilterConst.CreatedAtSort"
                  data-sortorder="@FilterConst.Ascending"></i>
              </div>
            </div>
          </th>
          <th class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        @if (Model.Items != null)
        {
          @foreach (var resume in Model.Items)
          {
            <tr>
              <td>@resume.StudentName</td>
              <td>@resume.StudentEmail</td>
              <td>@resume.Branch</td>
              <td>@resume.UploadDate?.ToString("dd/MM/yyyy")</td>
              <td class="text-center">
                <button data-resumeid="@resume.ResumeId" class="btn btn-sm resume-comment-modal-btn" data-bs-toggle="modal" data-bs-target="#resumeCommentAddModal" style="color: #764ba2; border: 1px solid #764ba2;">
                  <i class="fa-solid fa-comment"></i>
                </button>
                <a target="_blank" style="color: #764ba2; border: 1px solid #764ba2;"
                  href="@Url.Action("PreviewResume", "Resume", new { fileName = Uri.EscapeDataString(resume.ResumePath!) })"
                  class="btn btn-sm">View</a>
                <a href="@Url.Action("DownloadResume", "Resume", new { fileName = resume.ResumePath })"
                  style="color: #764ba2; border: 1px solid #764ba2;" class="btn btn-sm">Download</a>
              </td>
            </tr>
          }
        }
      </tbody>
    </table>
  </div>

  <div class="pagination d-flex flex-column flex-md-row justify-content-center gap-2 pb-2">
    <div class="d-flex Pages justify-content-center align-items-center">
      <button id="previousResumeList" @(Model.CurrentPage > 1 ? "" : "disabled") type="button"
        style="background-color: rgba(102, 126, 234, 0.1);"
        class="btn btn-outline-secondary arrows d-flex justify-content-center align-items-center px-3 py-2 mx-2">
        <i class="fa-solid fa-angle-left" style="color: #5473ff;"></i>
      </button>
      <div class="d-flex justify-content-center align-items-center gap-3 mx-5">
        <p class="m-0">Items Per Page:</p>
        <div class="">
          <select id="pageSizeResumeList" class="px-2 border border-1 border-black p-1"
            style="border-radius: 5px; background-color: rgba(102, 126, 234, 0.1);" asp-for="PageSize">
            <option value="3" selected="@(Model.PageSize == 3)">3</option>
            <option value="5" selected="@(Model.PageSize == 5)">5</option>
            <option value="10" selected="@(Model.PageSize == 10)">10</option>
            <option value="15" selected="@(Model.PageSize == 15)">15</option>
            <option value="@Model.TotalRecords" selected="@(Model.PageSize == Model.TotalRecords)">All</option>
          </select>
        </div>
      </div>
      <button id="nextResumeList" @(Model.CurrentPage < Model.TotalPages ? "" : "disabled") type="button"
        style="background-color: rgba(102, 126, 234, 0.1);"
        class="btn btn-outline-secondary arrows d-flex justify-content-center align-items-center px-3 py-2 me-1">
        <i class="fa-solid fa-angle-right" style="color: #5473ff;"></i>
      </button>
    </div>
  </div>

  <div class="w-100 d-flex justify-content-center mt-3">
    <p class="m-0 mx-1">Showing @Model.StartIndex-
      @(Model.EndIndex) of @Model.TotalRecords
    </p>
  </div>
}